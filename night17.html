<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DJ RADAR Â· AI NIGHT MODE</title>

<style>
html,body{
  margin:0;
  background:#000;
  overflow:hidden;
}
#radar{
  width:100vw;
  height:100vh;
  background:radial-gradient(circle,#0f0 2%,#000 70%);
  animation:spin 4s linear infinite;
}
@keyframes spin{
  from{transform:rotate(0deg)}
  to{transform:rotate(360deg)}
}
#hud{
  position:fixed;
  top:10px;
  left:10px;
  color:#0f0;
  font-family:monospace;
}
#start{
  position:fixed;
  inset:0;
  display:flex;
  justify-content:center;
  align-items:center;
  color:#fff;
  font-size:24px;
  background:#000;
  cursor:pointer;
}
#startScreen {
  position:fixed;
  inset:0;
  background:black;
  display:flex;
  align-items:center;
  justify-content:center;
}

#startBtn {
  font-size:22px;
  padding:20px 40px;
  border:none;
  border-radius:12px;
  background:#00ffcc;
}


</style>
</head>

<body>

<div id="radar"></div>
<div id="hud">LOADING AI...</div>
<div id="start">â–¶ TAP TO START DJ MODE</div>
<div id="startScreen">
  <button id="startBtn">â–¶ TAP TO START AI NIGHT</button>
</div>

<div id="ui" style="display:none">
  <h1 id="temp">ðŸŒ¡ -- Â°C</h1>
</div>

<audio id="music" src="music.mp3" loop></audio>

<iframe id="yt"
  width="0" height="0"
  src="https://www.youtube.com/embed/gu0mj-Ljr4I?enablejsapi=1"
  allow="autoplay"
></iframe>

<script>
let energy = 0.5;
let weather = "";

document.getElementById("start").onclick = () => {
  document.getElementById("start").style.display="none";
  document.getElementById("yt").contentWindow.postMessage(
    '{"event":"command","func":"playVideo","args":""}', '*'
  );
};

fetch("https://script.google.com/macros/s/AKfycbyhU4wtMtkpQaBAbsWUneSdcYQETJNS76fkhbm-poBG62fnAam_wmUMtFNzECym6TCt/exec")
.then(r=>r.json())
.then(data=>{
  weather = data.now.weather;
  document.getElementById("hud").innerText =
    data.now.location + " Â· " + weather;
  aiRule();
});

function aiRule(){
  if(weather.includes("é›¨")){
    document.getElementById("radar").style.background =
      "radial-gradient(circle,#0ff,#000)";
    energy = 0.4;
  }else{
    energy = 0.8;
  }
  document.getElementById("radar").style.animationDuration =
    (6 - energy*4) + "s";
}
</script>

</body>
</html>
