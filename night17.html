<!-- <!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>DJ RADAR Â· AI NIGHT MODE</title>

<style>
html,body{
  margin:0;
  background:#000;
  overflow:hidden;
}
#radar{
  width:100vw;
  height:100vh;
  background:radial-gradient(circle,#0f0 2%,#000 70%);
  animation:spin 5s linear infinite;
}
@keyframes spin{
  from{transform:rotate(0deg)}
  to{transform:rotate(360deg)}
}
#hud{
  position:fixed;
  top:12px;
  left:12px;
  color:#0f0;
  font-family:monospace;
  z-index:10;
}
#startScreen{
  position:fixed;
  inset:0;
  background:black;
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:20;
}
#startBtn{
  font-size:22px;
  padding:20px 40px;
  border:none;
  border-radius:14px;
  background:#00ffcc;
}
</style>
</head>

<body>

<div id="radar"></div>
<div id="hud">LOADING AI...</div>

<div id="startScreen">
  <button id="startBtn">â–¶ TAP TO START AI NIGHT</button>
</div>

<!-- YouTube Player -->
<iframe id="yt"
  width="0" height="0"
  src="https://www.youtube.com/embed/gu0mj-Ljr4I?enablejsapi=1&playsinline=1&mute=1"
  allow="autoplay; encrypted-media"
></iframe>

<script>
let energy = 0.6;
let minT = 0;
let maxT = 0;

// === æ‰‹æ©Ÿå•Ÿå‹•æ’­æ”¾ï¼ˆå”¯ä¸€æ­£ç¢ºæ–¹å¼ï¼‰===
document.getElementById("startBtn").onclick = () => {
  document.getElementById("startScreen").style.display = "none";

  const yt = document.getElementById("yt").contentWindow;
  yt.postMessage(JSON.stringify({
    event:"command",
    func:"playVideo",
    args:""
  }), "*");

  // æ’­æ”¾å¾Œè§£é™¤éœéŸ³
  setTimeout(()=>{
    yt.postMessage(JSON.stringify({
      event:"command",
      func:"unMute",
      args:""
    }), "*");
  }, 800);
};

// === çœŸæ°£è±¡ API ===
fetch("https://script.google.com/macros/s/AKfycbyhU4wtMtkpQaBAbsWUneSdcYQETJNS76fkhbm-poBG62fnAam_wmUMtFNzECym6TCt/exec")
.then(r=>r.json())
.then(d=>{
  minT = Number(d.minT);
  maxT = Number(d.maxT);

  document.getElementById("hud").innerText =
    `ğŸŒ¡ ${d.city} ${minT}~${maxT}Â°C`;

  aiRule();
});

// === AI è¦å‰‡ï¼ˆæº«åº¦ â†’ è¦–è¦ºï¼‰===
function aiRule(){
  if(maxT >= 30){
    energy = 0.9;
    radarColor("#ff0040");
  }else if(minT <= 15){
    energy = 0.4;
    radarColor("#00ccff");
  }else{
    energy = 0.7;
    radarColor("#00ff66");
  }

  document.getElementById("radar").style.animationDuration =
    (6 - energy*4) + "s";
}

function radarColor(color){
  document.getElementById("radar").style.background =
    `radial-gradient(circle,${color} 3%,#000 70%)`;
}
</script>

</body>
</html>
 -->
 
 <!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI NIGHT MODE</title>

<style>
html,body{
  margin:0;
  background:#000;
  overflow:hidden;
  color:#0f0;
  font-family:monospace;
}
#radar{
  width:100vw;
  height:100vh;
  background:radial-gradient(circle,#0f0 2%,#000 70%);
  animation:spin 5s linear infinite;
}
@keyframes spin{
  from{transform:rotate(0deg)}
  to{transform:rotate(360deg)}
}
#hud{
  position:fixed;
  top:10px;
  left:10px;
  z-index:10;
}
#startScreen{
  position:fixed;
  inset:0;
  background:black;
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:99;
}
#startBtn{
  font-size:22px;
  padding:20px 40px;
  border-radius:12px;
  border:none;
}
</style>
</head>

<body>

<div id="radar"></div>

<div id="hud">
  <div id="location">ğŸ“¡ è®€å–ä¸­...</div>
  <div id="temp">ğŸŒ¡ -- Â°C</div>
  <div id="weather">â˜ï¸ --</div>
</div>

<div id="startScreen">
  <button id="startBtn">â–¶ TAP TO START AI NIGHT</button>
</div>

<audio id="music" loop>
  <source src="music.mp3" type="audio/mpeg">
</audio>

<script>
const music = document.getElementById("music");
const startBtn = document.getElementById("startBtn");
const screen = document.getElementById("startScreen");

// âœ… æ‰‹æ©Ÿå¿…é ˆã€Œé»æ“Šã€æ‰æ’­æ”¾
startBtn.onclick = async () => {
  await music.play();
  screen.style.display = "none";
};

// âœ… çœŸæ°£è±¡ï¼ˆä½  Apps Scriptï¼‰
fetch("https://script.google.com/macros/s/AKfycbyhU4wtMtkpQaBAbsWUneSdcYQETJNS76fkhbm-poBG62fnAam_wmUMtFNzECym6TCt/exec")
.then(r=>r.json())
.then(data=>{
  document.getElementById("location").innerText = "ğŸ“ " + data.location;
  document.getElementById("temp").innerText = "ğŸŒ¡ " + data.temp + " Â°C";
  document.getElementById("weather").innerText = "â˜ï¸ " + data.weather;

  // è¦–å¤©æ°£æ”¹é›·é”
  if(data.weather.includes("é›¨")){
    document.getElementById("radar").style.background =
      "radial-gradient(circle,#0ff,#000)";
  }
});
</script>

</body>
</html>
