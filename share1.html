<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<title>å°æµ·è»æƒ…ç›£æ¸¬å„€è¡¨æ¿</title>
<!-- Open Graph -->
<meta property="og:title" content="å°æµ·è»æƒ…ç›£æ¸¬å„€è¡¨æ¿ï¼ˆå…¬é–‹å±•ç¤ºï¼‰">
<meta property="og:description" content="å½™æ•´åœ‹é˜²éƒ¨æ¯æ—¥å…¬é–‹å…±æ©Ÿå…±è‰¦è³‡è¨Šï¼Œåœ°åœ–åŒ–å±•ç¤º">
<meta property="og:type" content="website">
<meta property="og:url" content="https://m-jpg533.github.io/oxs/share1.html">
<meta property="og:image" content="https://m-jpg533.github.io/oxs/preview-og.png">

<link
  rel="stylesheet"
  href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
/>

<style>
body {
  margin: 0;
  background: #0b0f1a;
  color: #e0e6ff;
  font-family: Arial, sans-serif;
}
header {
  padding: 16px;
  text-align: center;
  font-size: 22px;
  background: #11162a;
}
#info {
  display: flex;
  justify-content: space-around;
  padding: 12px;
}
.box {
  background: #161c35;
  padding: 12px 20px;
  border-radius: 8px;
}
#map {
  height: 70vh;
}
</style>
</head>

<body>

<header>å°æµ·å‘¨é‚Šå…±æ©Ÿå…±è‰¦å‹•æ…‹ï¼ˆå…¬é–‹å±•ç¤ºï¼‰</header>

<div id="info">
  <div class="box">âœˆ å…±æ©Ÿï¼š<span id="air">-</span></div>
  <div class="box">ğŸš¢ å…±è‰¦ï¼š<span id="sea">-</span></div>
  <div class="box">ğŸ•’ æ›´æ–°ï¼š<span id="time">-</span></div>
</div>

<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>

const API = "https://army-air-api.a0917282565.workers.dev/";

const map = L.map('map').setView([23.7, 121], 7);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{
  attribution:'Â© OpenStreetMap'
}).addTo(map);

fetch(API)
  .then(res => res.json())
  .then(data => {

    // âœ… ç›´æ¥è®€å–ä½  API å¯¦éš›å­˜åœ¨çš„æ¬„ä½
    document.getElementById("air").textContent = data.aircraft;
    document.getElementById("sea").textContent = data.vessels;
    document.getElementById("time").textContent = data.updated;

    // âœ… é¡¯ç¤ºåœ°åœ–æ¨™è¨˜
    data.zones.forEach(z => {

      let icon = "ğŸ“";
      let label = "";
      let count = 0;

      if (z.air !== undefined) {
        icon = "âœˆ";
        label = "å…±æ©Ÿ";
        count = z.air;
      }

      if (z.sea !== undefined) {
        icon = "ğŸš¢";
        label = "å…±è‰¦";
        count = z.sea;
      }

      L.marker([z.lat, z.lng]).addTo(map)
        .bindPopup(`
          ${icon} ${z.name}<br>
          ${label} æ•¸é‡ï¼š${count}
        `);
    });
  })
  .catch(err => {
    console.error("API è®€å–å¤±æ•—", err);
  });
</script>

</script>
<div>è³‡æ–™ä¾†æºï¼šä¸­è¯æ°‘åœ‹åœ‹é˜²éƒ¨æ¯æ—¥å…¬é–‹è³‡è¨Š
æœ¬ç¶²ç«™åƒ…é€²è¡Œè³‡æ–™å½™æ•´èˆ‡è¦–è¦ºåŒ–å±•ç¤ºï¼Œä¸ä»£è¡¨å®˜æ–¹ç«‹å ´
æ‰€æœ‰è³‡æ–™çš†éå³æ™‚è»äº‹è¡Œå‹•è³‡è¨Š</div>
</body>
</html>
