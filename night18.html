<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI NIGHT MODE</title>

<style>
html,body{
  margin:0;
  background:#000;
  overflow:hidden;
  color:#0f0;
  font-family:monospace;
}
#radar{
  width:100vw;
  height:100vh;
  background:radial-gradient(circle,#0f0 2%,#000 70%);
  animation:spin 5s linear infinite;
}
@keyframes spin{
  from{transform:rotate(0deg)}
  to{transform:rotate(360deg)}
}
#hud{
  position:fixed;
  top:12px;
  left:12px;
  z-index:10;
  font-size:18px;
}
#startScreen{
  position:fixed;
  inset:0;
  background:black;
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:99;
}
#startBtn{
  font-size:22px;
  padding:20px 40px;
  border-radius:12px;
  border:none;
  background:#00ffcc;
  color:#000;
}
</style>
</head>

<body>

<div id="radar"></div>

<div id="hud">
  <div id="location">ğŸ“¡ è®€å–ä¸­...</div>
  <div id="temp">ğŸŒ¡ -- Â°C</div>
  <div id="weather">â˜ï¸ --</div>
</div>

<div id="startScreen">
  <button id="startBtn">â–¶ TAP TO START AI NIGHT</button>
</div>

<audio id="music" loop>
  <source src="https://m-jpg533.github.io/oxs/59.mp3.mp4" type="audio/mpeg">
</audio>

<script>
/* â€”â€”â€” UI å…ƒä»¶ â€”â€”â€” */
const music = document.getElementById("music");
const startBtn = document.getElementById("startBtn");
const screen = document.getElementById("startScreen");
const hudLocation = document.getElementById("location");
const hudTemp = document.getElementById("temp");
const hudWeather = document.getElementById("weather");
const radar = document.getElementById("radar");

// ğŸ”— ä½ çš„ GAS Web App URL
const GAS_URL = "https://script.google.com/macros/s/AKfycbzA20FYmlgY6WPMfv2gwlFGk96zluog-6ICqmfar1qiR6OBJ9jLh9lukGpKI82NzsHc/execCWA-6DEFC9E1-5016-483E-9751-F71428FEE7D3/exec";

/* â€”â€”â€” æ‰‹æ©Ÿå¿…é ˆç”±ä½¿ç”¨è€…é»æ“Šæ‰æ’­æ”¾ â€”â€”â€” */
startBtn.onclick = async () => {
  await music.play();       // ğŸ“³ æ‰‹æ©Ÿè§£é–éŸ³è¨Š
  screen.style.display = "none";
  loadWeatherData();        // é–‹å§‹æŠ“æ°£è±¡
};

/* â€”â€”â€” æŠ“æ°£è±¡è³‡æ–™ â€”â€”â€” */
function loadWeatherData(){
  fetch(GAS_URL)
  .then(res => res.json())
  .then(data => {
    hudLocation.innerText = "ğŸ“ " + data.location;
    hudTemp.innerText = `ğŸŒ¡ ${data.minT} ~ ${data.maxT} Â°C`;
    hudWeather.innerText = "â˜ï¸ " + data.weather;

    /* â€”â€” æ ¹æ“šå¤©æ°£æ”¹è®Šé›·é”é¡è‰² / é€Ÿåº¦ â€”â€” */
    if(data.weather.includes("é›¨")){
      radar.style.background =
        "radial-gradient(circle,#00ccff,#000)";
      radar.style.animationDuration = "8s";
    } else {
      radar.style.background =
        "radial-gradient(circle,#00ff66,#000)";
      radar.style.animationDuration = "4s";
    }
  })
  .catch(err=>{
    hudLocation.innerText = "âŒ æ°£è±¡è®€å–å¤±æ•—";
    console.error(err);
  });
}
</script>

</body>
</html>
